<div id="transaction-form" class="bgc-air p-3 rounded border">
    <%= form_with(model: current_user.transactions.new, url: transactions_path, method: "post") do |f| %>
        <%= f.hidden_field :symbol, value: key %>
        <%= f.hidden_field :price, value: price %>
        <div class="row">
            <div class="mb-3 font-robo col-6">
                <div class="input-group">
                    <span class="input-group-text">$</span>
                    <div class="form-floating">
                        <input type="text" class="form-control" value="<%= number_with_precision(current_user.cash, precision: 2) %>" disabled readonly>
                        <label>Cash</label>
                    </div>
                </div>
            </div>

            <% if current_user.stocks.exists?(symbol: key) %>
            <div class="mb-3 font-robo col-6">
                <div class="input-group">
                    <div class="form-floating">
                        <input type="text" disabled readonly class="form-control" value="<%= current_user.stocks.not_zero.find_by(symbol: key).quantity %>">
                        <label><%= key %></label>
                    </div>
                    <span class="input-group-text">shares</span>
                </div>
            </div>
            <% end %>
        </div>

        Quantity:
        <%= f.number_field :quantity, max: (current_user.cash / price).floor, data: {
            controller: "transact-input"
        }, required: true %>
        <% if current_user.cash > price %>
        <%= f.submit "Buy" %>
        <% end %>
        <% if current_user.stocks.not_zero.exists?(symbol: key) %>
        <%= f.submit "Sell" %>
        <% end %>
    <% end %>
</div>